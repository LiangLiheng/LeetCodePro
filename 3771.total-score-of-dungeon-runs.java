#\n# @lc app=leetcode id=3771 lang=java\n#\n# [3771] Total Score of Dungeon Runs\n#\n\n# @lc code=start\nclass Solution {\n    public long totalScore(int hp, int[] damage, int[] requirement) {\n        int n = damage.length;\n        long[] prefix = new long[n + 1];\n        for (int i = 1; i <= n; i++) {\n            prefix[i] = prefix[i - 1] + damage[i - 1];\n        }\n        long ans = 0;\n        for (int k = 0; k < n; k++) {\n            long thresh = (long) requirement[k] + prefix[k + 1] - hp;\n            int left = 0, right = k;\n            int pos = k + 1;\n            while (left <= right) {\n                int mid = left + (right - left) / 2;\n                if (prefix[mid] >= thresh) {\n                    pos = mid;\n                    right = mid - 1;\n                } else {\n                    left = mid + 1;\n                }\n            }\n            if (pos <= k) {\n                ans += (k - pos + 1L);\n            }\n        }\n        return ans;\n    }\n}\n# @lc code=end